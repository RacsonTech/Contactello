<!DOCTYPE html>
<html>
  <!---Title of the WebPage--->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!---BootStrap?--->
    <link rel="stylesheet" href="public/css/bootstrap.min.css">
    <link rel="stylesheet" href="public/css/style.css">
    <title>
      SmallProjectCOP4331
    </title>
  </head>

<body style="padding-top:0px;">

  <a id="top"></a>
   <!-- the entire document -->
    <div class="row bg-dark">
      <div class="col col-sm-12">
        <img src="/public/images/Logo 2 - (Background removed) Looka-com.png" class=" img-fluid mx-auto d-block " >
      </div>
    </div>

    <div class="mt-5 mb-2 text-light text-center ">
      <h class="lead fs-2 fw-bold " style="font-size: x-large; font-style:unset;"> Sign In To Continue </h>
    </div>
    
    <div class="container position-relative start 50 top-50">
      <div class="row justify-content-center">
        <div class="bg-light text-dark col-md-8 col-10 p-sm-4 justify-content-center" style="max-width:600px;border-radius:3px;filter:drop-shadow(0 1px 2px black);">

          <form action="LAMPAPI/Login.php" class="needs-validation" id="formId" method="POST" novalidate> <!---not sure about this-->
            
            <div class="col-md-12 p-1">
              <div class="form-group">
                <label for="email validationCustom01" class="form-label"> User ID:</label>
                <input type="text" class="form-control" id="email validationCustom01" placeholder="Enter UserID" name="Login" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback"> Please enter valid User ID</div>
              </div>
            </div>
    
            <div class="col-md-12 p-1">
              <div class="form-group">
                <label for="pwd validationCustom04">Password:</label>
                <input type="password" class="form-control" id="pwd validationCustom04" placeholder="Enter password" minlength="6" maxlength="50" name="Password" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback"> Please enter valid Password </div>
              </div>
            </div>
          
            <div class="col-md-12 p-1 ">
              <input type="checkbox" onclick="myFunction()">Show Password
            </div>
      
            <div class="col pb-1 p-2">
              <button type="submit" id="submitButton" class="btn btn-primary">
                Log In
              </button>
            </div>

          </form>

        </div>

      </div> 

      

        <div class="row text-center justify-content-center m-5">
          <div class="bg-light text-dark col-md-3 col-sm-6 rounded p-2 " style=" filter:drop-shadow(0 1px 2px black);">
            <p> Don't have an account? Have Questions? </p>
            
            <div class="dropdown">
              <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Select Option
              </button>
            
              <div class="dropdown-menu">
                <a class="dropdown-item" href="register">Sign Up</a>
                <a class="dropdown-item" href="https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=contactello01@gmail.com" target="_blank">Contact Us</a>
              </div>

            </div>
  
          </div>
        </div>

    </div>

  <script href= "public/js/bootstrap.bundle.min.js"></script>
  <script src="public/js/jquery-3.6.0.min.js"></script>
  <script src="public/js/jquery-validation-min.js"></script>
  <script src="public/js/main.js"></script>

  <script>
    $('#formId').on('submit', function(e){
      e.preventDefault();
      console.log(formToJsonString($(this)))
      $.ajax({
        url: 'LAMPAPI/Login',
        type : "POST",
        dataType : 'json',
        contentType: 'application/json;charset=UTF-8',
        data : formToJsonString($(this)),
        success : function(data) {
          if (data.UserID < 1) {
            alert("Invalid Credentials, Please try again!")
          }
          else{
            console.log("success!")
            document.cookie = `UserID=${data.UserID};86400000`
            console.log(data)
            location.href="/"}
        }
      })
    })
  </script>

  <script>
        (() => {
      'use strict';

      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      const forms = document.querySelectorAll('.needs-validation');

      // Loop over them and prevent submission
      Array.prototype.slice.call(forms).forEach((form) => {
        form.addEventListener('submit', (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    })();
  </script>

  <script>
        function myFunction() {
      var x = document.getElementById("pwd validationCustom04");
      if (x.type === "password") {
        x.type = "text";
      } else {
        x.type = "password";
      }
    }
  </script>
  

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  </body>
  </html>
